import React, { useState, useEffect } from 'react';
import { Menu, X, Code, Cpu, Brain, Calendar, Mail, Github, Linkedin, Facebook, Upload, ChevronDown, Terminal, Database, Globe } from 'lucide-react';

export default function App() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [activeSection, setActiveSection] = useState('home');
  
  // Ảnh mặc định placeholder
  const [avatar, setAvatar] = useState("https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=1965&auto=format&fit=crop"); 

  // Xử lý scroll spy an toàn
  useEffect(() => {
    const handleScroll = () => {
      const sections = ['home', 'about', 'skills', 'events', 'contact'];
      const scrollPosition = window.scrollY + 100;

      for (const section of sections) {
        const element = document.getElementById(section);
        if (element && element.offsetTop <= scrollPosition && (element.offsetTop + element.offsetHeight) > scrollPosition) {
          setActiveSection(section);
        }
      }
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const handleImageUpload = (event) => {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () => {
        setAvatar(reader.result);
      };
      reader.readAsDataURL(file);
    }
  };

  const scrollTo = (id) => {
    setIsMenuOpen(false);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
  };

  const Navigation = () => (
    <nav className="fixed top-0 left-0 w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800 shadow-lg">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16">
          <div className="flex-shrink-0 flex items-center gap-2 cursor-pointer" onClick={() => scrollTo('home')}>
            <Terminal size={24} className="text-green-500" />
            <span className="font-bold text-xl tracking-tighter text-white">
              LVP<span className="text-green-500">.AI</span>
            </span>
          </div>
          
          {/* Desktop Menu */}
          <div className="hidden md:block">
            <div className="ml-10 flex items-baseline space-x-8">
              {['Trang chủ', 'Giới thiệu', 'Kỹ năng', 'Sự kiện', 'Liên hệ'].map((item, index) => {
                const id = ['home', 'about', 'skills', 'events', 'contact'][index];
                return (
                  <button
                    key={item}
                    onClick={() => scrollTo(id)}
                    className={`${activeSection === id ? 'text-green-400 bg-slate-800/50' : 'text-slate-300 hover:text-white hover:bg-slate-800'} px-3 py-2 rounded-md text-sm font-medium transition-all duration-300`}
                  >
                    {item}
                  </button>
                )
              })}
            </div>
          </div>

          {/* Mobile Menu Button */}
          <div className="-mr-2 flex md:hidden">
            <button
              onClick={() => setIsMenuOpen(!isMenuOpen)}
              className="bg-slate-800 inline-flex items-center justify-center p-2 rounded-md text-slate-400 hover:text-white hover:bg-slate-700 focus:outline-none"
            >
              {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
            </button>
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      {isMenuOpen && (
        <div className="md:hidden bg-slate-900 border-b border-slate-800 animate-in slide-in-from-top-5">
          <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
             {['Trang chủ', 'Giới thiệu', 'Kỹ năng', 'Sự kiện', 'Liên hệ'].map((item, index) => {
                const id = ['home', 'about', 'skills', 'events', 'contact'][index];
                return (
                  <button
                    key={item}
                    onClick={() => scrollTo(id)}
                    className="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-slate-300 hover:text-white hover:bg-slate-800"
                  >
                    {item}
                  </button>
                )
              })}
          </div>
        </div>
      )}
    </nav>
  );

  return (
    <div className="bg-slate-950 text-slate-200 min-h-screen font-sans selection:bg-green-500/30">
      <Navigation />

      {/* Hero Section */}
      <section id="home" className="relative min-h-screen flex items-center justify-center pt-16 overflow-hidden">
        {/* Background Elements */}
        <div className="absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none">
          <div className="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-green-600/10 rounded-full blur-[120px]"></div>
          <div className="absolute bottom-[-10%] left-[-5%] w-[500px] h-[500px] bg-red-600/10 rounded-full blur-[120px]"></div>
          <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div>
        </div>

        <div className="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-12">
          
          {/* Text Content */}
          <div className="md:w-1/2 text-center md:text-left order-2 md:order-1">
            <div className="inline-flex items-center gap-2 px-3 py-1 mb-6 text-xs font-semibold tracking-wider text-green-400 uppercase bg-green-900/20 rounded-full border border-green-500/20">
              <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
              Available for work
            </div>
            <h1 className="text-5xl md:text-7xl font-extrabold text-white mb-6 tracking-tight leading-tight">
              Lục Văn <br/>
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-emerald-500 to-teal-500">Phương</span>
            </h1>
            <h2 className="text-2xl md:text-3xl font-light text-slate-300 mb-2">
              Chuyên ngành Trí tuệ Nhân tạo AI
            </h2>
            <p className="text-xl text-red-500 font-mono mb-6 font-bold tracking-widest bg-red-500/5 inline-block px-2 rounded">MSSV: 04457</p>
            <p className="text-slate-400 text-lg max-w-lg mx-auto md:mx-0 mb-8 leading-relaxed">
              Kiến tạo tương lai thông qua Trí tuệ Nhân tạo. Chuyên sâu về Machine Learning, Deep Learning và các ứng dụng thông minh.
            </p>
            
            <div className="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
              <button onClick={() => scrollTo('contact')} className="group px-8 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-900/20">
                <Mail size={18} /> Liên hệ ngay
              </button>
              <button onClick={() => scrollTo('about')} className="px-8 py-3 bg-slate-800 border border-slate-700 text-white font-bold rounded-lg hover:bg-slate-700 transition-all">
                Tìm hiểu thêm
              </button>
            </div>
          </div>

          {/* Avatar Image */}
          <div className="md:w-1/2 flex justify-center relative order-1 md:order-2">
            <div className="relative w-72 h-72 md:w-[450px] md:h-[450px]">
                {/* Hexagon Shape Container using CSS clip-path or simple rounding */}
                <div className="absolute inset-0 bg-gradient-to-r from-red-500 to-green-500 rounded-full blur-2xl opacity-20 animate-pulse"></div>
                
                <div className="relative w-full h-full rounded-3xl overflow-hidden border-2 border-slate-700 bg-slate-800 shadow-2xl group">
                   <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 z-20"></div>
                    <img 
                      src={avatar} 
                      alt="Lục Văn Phương" 
                      className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                    />
                    
                    {/* Upload Overlay */}
                    <div className="absolute inset-0 bg-slate-900/80 backdrop-blur-sm flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 z-30">
                        <label htmlFor="avatar-upload" className="cursor-pointer flex flex-col items-center group/btn">
                            <div className="p-4 rounded-full bg-slate-800 border border-slate-600 mb-3 group-hover/btn:border-green-500 transition-colors">
                                <Upload className="text-green-500" size={32} />
                            </div>
                            <span className="text-white text-lg font-medium">Tải ảnh của bạn lên</span>
                            <span className="text-slate-400 text-sm mt-1">Hỗ trợ JPG, PNG</span>
                        </label>
                        <input 
                            id="avatar-upload" 
                            type="file" 
                            accept="image/*" 
                            className="hidden" 
                            onChange={handleImageUpload}
                        />
                    </div>
                </div>

                {/* Floating Badges */}
                <div className="absolute -bottom-6 -right-6 bg-slate-900/90 backdrop-blur border border-slate-700 p-4 rounded-xl shadow-xl flex items-center gap-3 animate-bounce hidden md:flex">
                    <div className="p-2 bg-green-500/10 rounded-lg">
                        <Brain className="text-green-500" size={24} />
                    </div>
                    <div>
                        <p className="text-xs text-slate-400 uppercase font-bold">Model Status</p>
                        <p className="text-sm font-bold text-white">Training...</p>
                    </div>
                </div>
            </div>
          </div>
        </div>

        <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce cursor-pointer text-slate-500 hover:text-white transition-colors" onClick={() => scrollTo('about')}>
            <ChevronDown size={32} />
        </div>
      </section>

      {/* About Section */}
      <section id="about" className="py-24 bg-slate-900 relative overflow-hidden">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                <div className="relative">
                    <div className="absolute -inset-4 bg-gradient-to-r from-green-500 to-teal-500 rounded-xl opacity-20 blur-lg"></div>
                    <div className="relative bg-slate-800 border border-slate-700 rounded-xl p-8 shadow-2xl">
                        <Code className="text-green-500 mb-4" size={48} />
                        <h3 className="text-2xl font-bold text-white mb-4">Đam mê công nghệ</h3>
                        <p className="text-slate-400 leading-relaxed mb-6">
                            Tôi là Lục Văn Phương, sinh viên mã số <span className="text-red-400 font-mono">04457</span>. 
                            Tôi tin rằng AI không chỉ là những dòng code khô khan, mà là công cụ để giải quyết những vấn đề thực tế phức tạp nhất.
                        </p>
                        <ul className="space-y-3 text-slate-300">
                            <li className="flex items-center gap-2"><div className="w-2 h-2 bg-green-500 rounded-full"></div> Tư duy thuật toán sắc bén</li>
                            <li className="flex items-center gap-2"><div className="w-2 h-2 bg-green-500 rounded-full"></div> Khả năng tự học và thích nghi cao</li>
                            <li className="flex items-center gap-2"><div className="w-2 h-2 bg-green-500 rounded-full"></div> Làm việc nhóm hiệu quả</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <h2 className="text-3xl md:text-5xl font-bold text-white mb-6">Giới Thiệu <span className="text-green-500">.</span></h2>
                    <p className="text-lg text-slate-400 mb-6 leading-relaxed">
                        Với chuyên ngành Lập trình ứng dụng Trí tuệ nhân tạo, tôi tập trung nghiên cứu sâu về các mô hình học sâu (Deep Learning) và ứng dụng của chúng trong xử lý ảnh và ngôn ngữ tự nhiên.
                    </p>
                    <div className="grid grid-cols-2 gap-4">
                        <div className="p-4 bg-slate-800 rounded-lg border border-slate-700">
                            <h4 className="text-3xl font-bold text-white mb-1">3+</h4>
                            <p className="text-sm text-slate-400">Năm kinh nghiệm Code</p>
                        </div>
                        <div className="p-4 bg-slate-800 rounded-lg border border-slate-700">
                            <h4 className="text-3xl font-bold text-white mb-1">10+</h4>
                            <p className="text-sm text-slate-400">Dự án AI thực tế</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </section>

      {/* Skills Section */}
      <section id="skills" className="py-24 bg-slate-950">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
                <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">Tech Stack</h2>
                <div className="w-24 h-1 bg-gradient-to-r from-green-500 to-teal-500 mx-auto rounded-full"></div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                {[
                    { icon: <Brain size={32} />, title: "Machine Learning", desc: "TensorFlow, PyTorch, Scikit-learn", color: "text-red-500", border: "hover:border-red-500/50" },
                    { icon: <Globe size={32} />, title: "Web Development", desc: "React, Node.js, FastAPI", color: "text-blue-500", border: "hover:border-blue-500/50" },
                    { icon: <Database size={32} />, title: "Data Science", desc: "Pandas, NumPy, SQL, MongoDB", color: "text-yellow-500", border: "hover:border-yellow-500/50" },
                    { icon: <Cpu size={32} />, title: "DevOps & Cloud", desc: "Docker, AWS, Git CI/CD", color: "text-purple-500", border: "hover:border-purple-500/50" }
                ].map((skill, index) => (
                    <div key={index} className={`bg-slate-900 p-8 rounded-2xl border border-slate-800 ${skill.border} transition-all duration-300 group hover:-translate-y-2 hover:shadow-xl`}>
                        <div className={`mb-6 p-4 rounded-xl bg-slate-800 w-fit ${skill.color} group-hover:scale-110 transition-transform`}>{skill.icon}</div>
                        <h3 className="text-xl font-bold text-white mb-3">{skill.title}</h3>
                        <p className="text-slate-400 text-sm leading-relaxed">{skill.desc}</p>
                    </div>
                ))}
            </div>
        </div>
      </section>

      {/* Events / Timeline Section */}
      <section id="events" className="py-24 bg-slate-900 relative overflow-hidden">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div className="text-center mb-16">
                <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">Hành Trình & Sự Kiện</h2>
                <p className="text-slate-400">Những cột mốc đáng nhớ trong sự nghiệp.</p>
            </div>

            <div className="space-y-8 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-slate-800 before:via-green-500 before:to-slate-800">
                {[
                    { year: "2025", title: "Tốt nghiệp Xuất sắc", desc: "Hoàn thành chương trình kỹ sư chuyên ngành AI với GPA 3.8/4.0.", icon: <Calendar size={20} /> },
                    { year: "2024", title: "Quán quân Hackathon", desc: "Giải nhất cuộc thi 'AI for Life' với giải pháp phát hiện bệnh cây trồng qua ảnh.", icon: <Code size={20} /> },
                    { year: "2023", title: "Thực tập sinh Google DSC", desc: "Tham gia phát triển cộng đồng Developer Student Clubs.", icon: <Globe size={20} /> },
                    { year: "2022", title: "Bắt đầu hành trình", desc: "Chính thức gia nhập khoa Công nghệ thông tin - Chuyên ngành AI.", icon: <Terminal size={20} /> }
                ].map((event, index) => (
                    <div key={index} className="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group">
                        <div className="flex items-center justify-center w-10 h-10 rounded-full border-4 border-slate-900 bg-green-500 text-slate-900 shadow shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 z-10">
                            {event.icon}
                        </div>
                        <div className="w-[calc(100%-4rem)] md:w-[calc(50%-2.5rem)] bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg hover:border-green-500 transition-colors">
                            <div className="flex items-center justify-between space-x-2 mb-2">
                                <h3 className="font-bold text-white text-lg">{event.title}</h3>
                                <span className="px-2 py-1 bg-slate-700 rounded text-xs text-green-400 font-mono">{event.year}</span>
                            </div>
                            <p className="text-slate-400 text-sm">{event.desc}</p>
                        </div>
                    </div>
                ))}
            </div>
        </div>
      </section>

      {/* Contact Section */}
      <section id="contact" className="py-24 bg-slate-950">
        <div className="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl p-8 md:p-12 border border-slate-700 shadow-2xl relative overflow-hidden">
                <div className="absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-[80px]"></div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div>
                        <h2 className="text-3xl md:text-4xl font-bold text-white mb-6">Liên Hệ Hợp Tác</h2>
                        <p className="text-slate-400 mb-8">
                            Tôi luôn sẵn sàng cho những thử thách mới. Đừng ngần ngại liên hệ nếu bạn có ý tưởng thú vị hoặc cần tư vấn về giải pháp AI.
                        </p>
                        
                        <div className="space-y-4">
                            <div className="flex items-center gap-4 text-slate-300">
                                <div className="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center text-green-500"><Mail size={20} /></div>
                                <span>phuonglvpk04457@gmail.com</span>
                            </div>
                            <div className="flex items-center gap-4 text-slate-300">
                                <div className="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center text-blue-500"><Linkedin size={20} /></div>
                                <span>linkedin.com/in/lucvanphuong</span>
                            </div>
                        </div>

                        <div className="mt-8 flex gap-4">
                            <a href="#" className="w-12 h-12 flex items-center justify-center rounded-full bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors border border-slate-700"><Github size={20} /></a>
                            <a href="#" className="w-12 h-12 flex items-center justify-center rounded-full bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-blue-500 transition-colors border border-slate-700"><Facebook size={20} /></a>
                        </div>
                    </div>

                    <form className="space-y-4">
                        <div>
                            <input type="text" className="w-full px-4 py-3 bg-slate-950/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none text-white transition-all placeholder-slate-500" placeholder="Tên của bạn" />
                        </div>
                        <div>
                            <input type="email" className="w-full px-4 py-3 bg-slate-950/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none text-white transition-all placeholder-slate-500" placeholder="Email liên hệ" />
                        </div>
                        <div>
                            <textarea rows="4" className="w-full px-4 py-3 bg-slate-950/50 border border-slate-700 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none text-white transition-all placeholder-slate-500" placeholder="Nội dung tin nhắn..."></textarea>
                        </div>
                        <button type="button" className="w-full py-4 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-500 hover:to-teal-500 text-white font-bold rounded-lg transition-all shadow-lg transform hover:-translate-y-1">
                            Gửi tin nhắn
                        </button>
                    </form>
                </div>
            </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="bg-slate-950 py-8 border-t border-slate-900">
        <div className="max-w-7xl mx-auto px-4 text-center">
            <p className="text-slate-500 text-sm">
                © 2025 Lục Văn Phương (MSSV <span className="text-slate-400">04457</span>). All rights reserved.
            </p>
        </div>
      </footer>
    </div>
  );
}
